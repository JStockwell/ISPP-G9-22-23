<ion-header >
  <ion-toolbar color = "primary">
    <ion-title>Inicio de sesión</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color = "light">
  <div class = "ct">
    <img src = "../../../assets/images/Logo Prototipo.png"/>
    <form *ngIf= "!isLoggedIn" name = "form" (ngSubmit)="f.form.valid && logForm()" #f = "ngForm" novalidate>
      <ion-item color = "light"  lines = "none">
        <ion-label class="txt" for = "username" position="stacked">Nombre de usuario</ion-label>
        <ion-input [(ngModel)]="form.username" #username="ngModel" placeholder="Introduce tu nombre de usuario" name = "username" minlength="3" required maxlength="50"  [ngClass]="{ 'is-invalid': f.submitted && username.errors }"></ion-input>
      </ion-item>

      <div class="invalid-feedback error" *ngIf="username.errors && f.submitted">
        <div *ngIf="username.errors['required']">nombre de usuario requerido</div>
        <div *ngIf="username.errors['minlength']">
          El nombre de usuario debe tener al menos 3 caracteres
        </div>
        <div *ngIf="username.errors['maxlength']">
          El nombre de usuario puede tener como máximo 50 caracteres
        </div>
      </div>

      <ion-item color = "light"  lines = "none">
        <ion-label class="txt" position="stacked">Contraseña</ion-label>
        <ion-input type = "password" [(ngModel)]="form.password" value = "password" placeholder = "Introduce tu contraseña" name = "password" required minlength="6" #password="ngModel" [ngClass]="{ 'is-invalid': f.submitted && password.errors }"></ion-input>
      </ion-item>
      <div class="invalid-feedback error" *ngIf="password.errors && f.submitted">
        <div *ngIf="password.errors['required']">La contraseña es obligatoria</div>
        <div *ngIf="password.errors['minlength']">
          La contraseña debe tener al menos 6 caracteres
        </div>
      </div>
      <ion-button color="primary" expand="block" type = "submit" >
        Iniciar sesión
      </ion-button>

      
      
    </form>
    <ion-button class = "btacceder" *ngIf= "isLoggedIn" (click)="reloadPage()">Acceder</ion-button>
    <ion-button  class = "btacceder" *ngIf= "isLoggedIn" color="primary" (click)="eliminarUsuario( getUserId() )" >Borrar Cuenta </ion-button>

    <ion-button id="open-modal" expand="block">Borrar Cuenta</ion-button>
    <ion-modal #modal trigger="open-modal" [canDismiss]="canDismiss" [presentingElement]="presentingElement">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Borrar Cuenta</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="eliminarUsuario( getUserId() )">Borrar</ion-button>
              
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <p>Vas a eliminar tu cuenta</p>
        </ion-content>

      
      </ng-template>

     
    </ion-modal>

    
    
   
  </div>

  <ion-fab color = "primary" style = "padding-inline-start: 5%;" slot = "fixed" vertical = "bottom" horizontal = "beginning">
    <ion-fab-button  color = "primary" [routerLink]="['']">
      <ion-icon name="arrow-back-circle-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
