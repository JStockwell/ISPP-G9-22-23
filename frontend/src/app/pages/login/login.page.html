<ion-header >
  <ion-toolbar color = "primary">
    <ion-title>Inicio de sesión</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <ion-card color ="warning">
      <form *ngIf= "!isLoggedIn" name = "form" (ngSubmit)="f.form.valid && logForm()" #f = "ngForm" novalidate>
        <ion-item color = "warning">
          <ion-label for = "username" position="stacked">Nombre de usuario</ion-label>
          <ion-input [(ngModel)]="form.username" #username="ngModel" placeholder="Introduce tu nombre de usuario" name = "username" minlength="3" required maxlength="50"  [ngClass]="{ 'is-invalid': f.submitted && username.errors }"></ion-input>
        </ion-item>
  
        <div style = "padding-left: 5%;"class="invalid-feedback" *ngIf="username.errors && f.submitted">
          <div *ngIf="username.errors['required']">nombre de usuario requerido</div>
          <div *ngIf="username.errors['minlength']">
            El nombre de usuario debe tener al menos 3 caracteres
          </div>
          <div *ngIf="username.errors['maxlength']">
            El nombre de usuario puede tener como máximo 50 caracteres
          </div>
        </div>

        <ion-item color = "warning">
          <ion-label position="stacked">Contraseña</ion-label>
          <ion-input type = "password" [(ngModel)]="form.password" value = "password" placeholder = "Introduce tu contraseña" name = "password" required minlength="6" #password="ngModel" [ngClass]="{ 'is-invalid': f.submitted && password.errors }"></ion-input>
        </ion-item>
        <div style = "padding-left: 5%;" class="invalid-feedback" *ngIf="password.errors && f.submitted">
          <div *ngIf="password.errors['required']">La contraseña es obligatoria</div>
          <div *ngIf="password.errors['minlength']">
            La contraseña debe tener al menos 6 caracteres
          </div>
        </div>
        <ion-button color="dark" expand="block" type = "submit" >
          Iniciar sesion
        </ion-button>
  
      </form>
      <ion-button *ngIf= "isLoggedIn" (click)="reloadPage()">Acceder</ion-button>
    </ion-card>
  </div>

  <ion-fab style = "padding-inline-start: 5%;" slot = "fixed" vertical = "bottom" horizontal = "beginning">
    <ion-fab-button  color = "secondary" [routerLink]="['']">
      <ion-icon name="arrow-back-circle-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
